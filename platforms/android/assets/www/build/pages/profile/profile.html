<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-navbar *navbar>
	<button menuToggle>
    <ion-icon name="menu"></ion-icon>
  </button>
  <ion-title>Profile</ion-title>
</ion-navbar>

<ion-content class="profile">
<div>
  <ion-segment [(ngModel)]="tabs">
    <ion-segment-button value="myprofile">
      Your Info
    </ion-segment-button>
    <ion-segment-button value="myorders">
      Your orders
    </ion-segment-button>
  </ion-segment>
</div>
<div [ngSwitch]="tabs">
<div *ngSwitchWhen="'myprofile'">
  <ion-card >
  <ion-item>
    <ion-avatar item-left>
      <img src="img/marty-avatar.png">
    </ion-avatar>
    <h2 (updater)="titleupd()">{{title}}</h2>
    <p>November 5, 1955</p>
  </ion-item>

  <img src="img/advance-card-bttf.png">

  <ion-card-content>
  <p>Hey there!... This is your profile info.. every info of your profile will be put here!</p>
  </ion-card-content>

  <ion-item>
    <button primary clear item-left>
      <ion-icon name="albums"></ion-icon>
      <div>12 Finished Orders</div>
    </button>
    <button primary clear item-left>
      <ion-icon name="basket"></ion-icon>
      <div>2 Ongoing Orders</div>
    </button>
  </ion-item>
</ion-card>
</div>
<ion-list *ngSwitchWhen="'myorders'">
    <ion-item *ngFor="#order of orders" (click)="orderSelected(order)">
    <ion-card>
      <ion-card-header>
        OrderId: {{order._id}}
      </ion-card-header>
      <ion-card-content>
        <!-- Add card content here! -->
        <h3>UserId: {{order.user}}</h3>
        <h4>Date: {{order.date}}</h4>
        <ion-list>
        <button ion-item *ngFor="#file of order.src" (click)="download(file.path,order.user)">
          <ion-icon name="document" item-left></ion-icon>
          <h2>File:{{file.path.substr(file.path.lastIndexOf('/')+1)}}</h2>
          <h2>Copies: {{file.copies}}</h2>
          <h2>Option:{{file.option}}</h2>
        </button>
        </ion-list>
        <button secondary outline block (click)="updateStatus(order,0,2)">Finish Order</button>
      </ion-card-content>

    </ion-card>

    </ion-item>
  </ion-list>
  </div>
  <button [hidden]="person=='shop'" (click)="selectFile()" fab dark fab-bottom fab-center style="z-index: 999">
  <ion-icon name="add"></ion-icon>
</button>
</ion-content>
